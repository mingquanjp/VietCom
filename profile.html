<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>VietCom ‚Äì Profile</title>

<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
  :root{
    --red:#C5002E;
    --gold:#F1B634;
    --gold-dark:#E0A02B;
    --soft:#f6f6f6;
    --line:#e8e8e8;
    --text:#333;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    background:var(--red);
    font-family:'Baloo 2', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:var(--text);
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:28px 18px;
  }
  .app-header{color:#fff;text-align:center;margin-bottom:22px;position:relative}
  .app-header h1{margin:0;font-size:44px;letter-spacing:.5px;font-weight:800}
  .app-header p{margin:6px 0 0;font-size:18px;opacity:.95;font-weight:600}

  .back-home-btn{
    position:absolute;
    left:0;
    top:50%;
    transform:translateY(-50%);
    background:rgba(255,255,255,.15);
    border:2px solid rgba(255,255,255,.3);
    color:#fff;
    padding:10px 18px;
    border-radius:999px;
    font-weight:700;
    font-size:16px;
    cursor:pointer;
    transition:all .2s ease;
    backdrop-filter:blur(10px);
    font-family:'Baloo 2', sans-serif;
  }
  .back-home-btn:hover{
    background:rgba(255,255,255,.25);
    border-color:rgba(255,255,255,.5);
    transform:translateY(-50%) scale(1.05);
  }
  .back-home-btn:active{
    transform:translateY(-50%) scale(0.98);
  }

  .profile-card{
    width:88%;
    max-width:1160px;
    background:#fff;
    border-radius:28px;
    box-shadow:0 14px 40px rgba(0,0,0,.18);
    overflow:hidden;
    display:flex;
  }
  .left{
    width:40%; 
    border-right:1px solid var(--line); 
    padding:28px 22px; 
    text-align:center;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    min-height:600px;
  }
  .right{width:60%; padding:30px 28px}

  .avatar-section {
    flex:2;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
  }
  .avatar-wrap{position:relative; display:inline-block; margin-bottom:20px}
  .avatar{
    width:200px; 
    height:200px; 
    border-radius:999px; 
    object-fit:cover;
    border:5px solid var(--red); 
    box-shadow: 0 8px 20px rgba(197,0,46,.3)
  }
  .upload-btn{
    position:absolute; right:8px; bottom:8px;
    width:50px; height:50px; display:grid; place-items:center;
    background:#fff; border:3px solid var(--red); border-radius:999px;
    cursor:pointer; font-size:22px; user-select:none;
    box-shadow: 0 4px 12px rgba(197,0,46,.25);
  }
  .name{margin:0 0 8px;font-size:28px;font-weight:800}
  .age{margin:0;opacity:.7;font-size:16px}

  .level-section {
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:flex-end;
    padding-bottom:20px;
  }
  .level-card{
    margin:0 auto;
    width:min(320px, 100%);
    background:#fffef6;
    border:3px solid var(--gold);
    border-radius:22px;
    box-shadow:0 8px 0 var(--gold-dark), 0 16px 24px rgba(0,0,0,.12);
    padding:14px 14px 16px;
    text-align:left;
  }
  .level-info {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .level-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 800;
    color: #444;
  }
  .level-icon {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: #e7f8ec;
    border: 2px solid #59c686;
    display: grid;
    place-items: center;
    font-size: 14px;
  }
  .level-distance {
    font-weight: 700;
    background: #fafafa;
    padding: 8px 14px;
    border: 1px dashed var(--line);
    border-radius: 999px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  h2{margin:0 0 18px;color:var(--red);font-size:26px;font-weight:800}
  .form-row{display:flex; gap:12px}
  .form-group{flex:1; margin-bottom:14px}
  label{display:block; margin-bottom:6px; font-weight:700}
  input{
    width:100%; padding:12px 14px; border:1px solid #d8d8d8; border-radius:18px;
    font-size:15px; outline:none; transition:border .2s, box-shadow .2s;
  }
  input:focus{border-color:var(--red); box-shadow:0 0 0 3px rgba(197,0,46,.12)}

  .actions{
    display:flex; 
    justify-content:center; 
    align-items:center; 
    gap:16px; 
    margin-top:20px;
  }
  .btn-save, .back-home-btn-secondary{
    padding:14px 28px; 
    border-radius:999px; 
    font-weight:800; 
    font-size:18px;
    cursor:pointer; 
    transition:all .2s ease;
    font-family:'Baloo 2', sans-serif;
    min-width:140px;
  }
  .btn-save{
    background:var(--red); 
    color:#fff; 
    border:2px solid var(--red);
    box-shadow:0 10px 24px rgba(197,0,46,.35);
  }
  .btn-save:hover{
    background:#a50026;
    border-color:#a50026;
    transform:scale(1.02);
  }
  .btn-save:active{transform:scale(0.98)}
  .back-home-btn-secondary{
    background:transparent;
    border:2px solid var(--red);
    color:var(--red);
  }
  .back-home-btn-secondary:hover{
    background:var(--red);
    color:#fff;
    transform:scale(1.02);
  }
  .back-home-btn-secondary:active{transform:scale(0.98)}

  .toast{
    position:fixed; top:14px; left:50%; transform:translateX(-50%);
    background:#111; color:#fff; padding:12px 16px; border-radius:999px; font-weight:800;
    opacity:0; pointer-events:none; transition:opacity .25s ease, transform .25s ease;
    z-index:50;
  }
  .toast.show{ opacity:1; transform:translateX(-50%) translateY(0) }

  @media (max-width: 980px){
    .profile-card{flex-direction:column}
    .left,.right{width:100%}
    .left{
      border-right:none; 
      border-bottom:1px solid var(--line);
      min-height:auto;
      flex-direction:row;
      justify-content:space-between;
      align-items:center;
      padding:20px 22px;
    }
    .avatar-section {flex:none;}
    .avatar{width:120px; height:120px}
    .upload-btn{width:35px; height:35px; font-size:16px}
    .level-section {flex:none;}
    .level-card{margin:0}
    .back-home-btn{position:static; transform:none; margin-bottom:15px; font-size:14px; padding:8px 15px;}
    .app-header{display:flex; flex-direction:column; align-items:center;}
    .actions{flex-direction:column; gap:12px;}
    .btn-save, .back-home-btn-secondary{width:100%; min-width:auto;}
  }
</style>
</head>
<body>

  <div class="app-header">
    <h1>VietCom</h1>
    <p>One Circle, One Heart, One Vietnam</p>
  </div>

  <div class="profile-card">
    <section class="left">
      <div class="avatar-section">
        <div class="avatar-wrap">
          <img id="avatar" class="avatar" src="https://via.placeholder.com/300x300.png?text=Avatar" alt="avatar">
          <label class="upload-btn" title="Upload Avatar" for="upload">
            üì∑
            <input id="upload" type="file" accept="image/*" style="display:none">
          </label>
        </div>
        <h3 id="displayName" class="name">Name</h3>
        <p id="displayAge" class="age">Age</p>
      </div>

      <div class="level-section">
        <div class="level-card">
          <div class="level-info">
            <div class="level-badge">
              <span class="level-icon">‚úì</span>
              <span>Lv.<span id="levelNum">1</span></span>
            </div>
            <div class="level-distance">
              üìç <span id="distanceText">50 m</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="right">
      <h2>Profile Information</h2>
      <div class="form-row">
        <div class="form-group">
          <label for="firstName">First name</label>
          <input id="firstName" type="text" placeholder="First name">
        </div>
        <div class="form-group">
          <label for="lastName">Last name</label>
          <input id="lastName" type="text" placeholder="Last name">
        </div>
      </div>
      <div class="form-group">
        <label for="dob">Date of Birth</label>
        <input id="dob" type="date">
      </div>
      <div class="form-group">
        <label for="email">E-mail</label>
        <input id="email" type="email" placeholder="e-mail">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="city">City</label>
          <input id="city" type="text" placeholder="city">
        </div>
        <div class="form-group">
          <label for="country">Country</label>
          <input id="country" type="text" placeholder="country">
        </div>
      </div>
      <div class="form-group">
        <label for="gender">Gender</label>
        <input id="gender" type="text" placeholder="gender">
      </div>
      <div class="actions">
<button class="back-home-btn-secondary" onclick="window.location.href='homepage.html'">‚Üê Home</button>
        <button id="saveBtn" class="btn-save" type="button">Save</button>
      </div>
    </section>
  </div>

  <div id="toast" class="toast">Your profile has been saved!</div>

<script>
  const $ = (id)=>document.getElementById(id);
  function computeAge(dobStr){
    if(!dobStr) return null;
    const d = new Date(dobStr);
    if(isNaN(d)) return null;
    const now = new Date();
    let age = now.getFullYear() - d.getFullYear();
    const m = now.getMonth() - d.getMonth();
    if(m < 0 || (m === 0 && now.getDate() < d.getDate())) age--;
    return age;
  }
  function showToast(msg='‚úÖ Profile saved!'){
    const t = $('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(()=> t.classList.remove('show'), 2300);
  }
  $('upload').addEventListener('change', (e)=>{
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = (ev)=> $('avatar').src = ev.target.result;
    reader.readAsDataURL(file);
  });
  function updateNameAge(){
    const first = $('firstName').value.trim();
    const last  = $('lastName').value.trim();
    $('displayName').textContent = (first || last) ? `${first} ${last}`.trim() : 'Name';
    const age = computeAge($('dob').value);
    $('displayAge').textContent = age!=null ? `${age} years old` : 'Age';
  }
  ['firstName','lastName','dob'].forEach(id=> $(id).addEventListener('input', updateNameAge));

  let levelNum = 1;
  let reqHave = 226, reqNeed = 5;

  const STORAGE_KEY = 'vietcom_profile_data';
  const JUST_SAVED  = 'vietcom_just_saved';
  function saveAll(){
    const data = {
      firstName: $('firstName').value,
      lastName : $('lastName').value,
      dob      : $('dob').value,
      email    : $('email').value,
      city     : $('city').value,
      country  : $('country').value,
      gender   : $('gender').value,
      avatar   : $('avatar').src,
      levelNum, reqHave, reqNeed,
      distance : $('distanceText').textContent
    };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    localStorage.setItem(JUST_SAVED, '1');
    location.reload();
  }
  function loadAll(){
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return;
    try{
      const d = JSON.parse(raw);
      if(d.firstName) $('firstName').value = d.firstName;
      if(d.lastName)  $('lastName').value  = d.lastName;
      if(d.dob)       $('dob').value       = d.dob;
      if(d.email)     $('email').value     = d.email;
      if(d.city)      $('city').value      = d.city;
      if(d.country)   $('country').value   = d.country;
      if(d.gender)    $('gender').value    = d.gender;
      if(d.avatar)    $('avatar').src      = d.avatar;
      if(d.distance)  $('distanceText').textContent = d.distance;
      if(typeof d.levelNum==='number') levelNum = d.levelNum;
      if(typeof d.reqHave==='number')  reqHave = d.reqHave;
      if(typeof d.reqNeed==='number')  reqNeed = d.reqNeed;
      updateNameAge();
    }catch(e){ console.warn('Load error', e); }
  }
  $('saveBtn').addEventListener('click', saveAll);
    updateNameAge(); 
  loadAll();
  if(localStorage.getItem(JUST_SAVED)){
    showToast();
    localStorage.removeItem(JUST_SAVED);
  }
</script>
</body>
</html>
